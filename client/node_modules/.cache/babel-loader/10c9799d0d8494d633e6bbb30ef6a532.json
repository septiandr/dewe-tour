{"ast":null,"code":"var _jsxFileName = \"D:\\\\pelatihan\\\\batch 27\\\\dewe-tour\\\\client\\\\src\\\\components\\\\auth\\\\login.js\",\n    _s = $RefreshSig$();\n\nimport '../navbar.css';\nimport { Modal, Alert } from 'react-bootstrap';\nimport User from '../data-user.json';\nimport React, { useState, useContext, useHistory } from 'react';\nimport { API, setAuthToken } from \"../../config/api\";\nimport { UserContext } from \"../../context/userContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Login() {\n  _s();\n\n  const [show, setShow] = useState(false);\n\n  const handleClose = () => setShow(false);\n\n  const handleShow = () => setShow(true);\n\n  const [message, setMessage] = useState(null);\n  const [state, dispatch] = useContext(UserContext);\n  const history = useHistory();\n  const [login, setLogin] = useState({\n    isLogin: false,\n    user: {\n      email: \"\",\n      password: \"\"\n    }\n  });\n\n  const handleLogin = e => {\n    setLogin(prevState => ({ ...prevState,\n      [e.target.name]: e.target.value\n    }));\n  };\n\n  console.log(login.email);\n\n  const handleSubmitLogin = async e => {\n    try {\n      e.preventDefault();\n\n      if (login.email == User[1].email) {\n        sessionStorage.setItem(\"isLogin\", JSON.stringify(true));\n        sessionStorage.setItem(\"Admin\", JSON.stringify(true));\n      } else if (login.email == User[0].email) {\n        sessionStorage.setItem(\"isLogin\", JSON.stringify(true));\n      } else {\n        sessionStorage.setItem(\"isLogin\", JSON.stringify(false));\n        sessionStorage.setItem(\"Admin\", JSON.stringify(false));\n      } // Create Configuration Content-type here ...\n      // Content-type: application/json\n\n\n      const config = {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }; // Convert form data to string here ...\n\n      const body = JSON.stringify(login); // Insert data user for login process ...\n\n      const response = await API.post(\"/\", body, config);\n      setAuthToken(response.data.data.token); // Checking process\n\n      if ((response === null || response === void 0 ? void 0 : response.status) === 200) {\n        // Send data to useContext\n        dispatch({\n          type: \"LOGIN_SUCCESS\",\n          payload: response.data.data\n        }); // Status check\n\n        if (response.data.data.status === \"admin\") {\n          history.push(\"/complain-admin\");\n        } else {\n          history.push(\"/\");\n        }\n\n        const alert = /*#__PURE__*/_jsxDEV(Alert, {\n          variant: \"success\",\n          className: \"py-1\",\n          children: \"Login success\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 15\n        }, this);\n\n        setMessage(alert);\n      }\n    } catch (error) {\n      const alert = /*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"danger\",\n        className: \"py-1\",\n        children: \"Login failed\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 13\n      }, this);\n\n      setMessage(alert);\n      console.log(error);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"modal\",\n    children: /*#__PURE__*/_jsxDEV(Modal, {\n      show: show,\n      onHide: handleClose,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 3\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"body-register\",\n        children: /*#__PURE__*/_jsxDEV(Modal.Body, {\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSubmitLogin,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 5\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"emailLogin\",\n              name: \"email\",\n              type: \"email\",\n              onChange: handleLogin,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 5\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 94\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 5\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 28\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"passwordLogin\",\n              type: \"password\",\n              name: \"password\",\n              onChange: handleLogin,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 5\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 103\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"btn-login\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                id: \"handlelogin\",\n                type: \"submit\",\n                children: \"Login\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 5\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 5\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 5\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 1\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 1\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 1\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 1\n  }, this);\n}\n\n_s(Login, \"NOJXcJzMmUI02NiPi95WipIsK14=\", false, function () {\n  return [useHistory];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["D:/pelatihan/batch 27/dewe-tour/client/src/components/auth/login.js"],"names":["Modal","Alert","User","React","useState","useContext","useHistory","API","setAuthToken","UserContext","Login","show","setShow","handleClose","handleShow","message","setMessage","state","dispatch","history","login","setLogin","isLogin","user","email","password","handleLogin","e","prevState","target","name","value","console","log","handleSubmitLogin","preventDefault","sessionStorage","setItem","JSON","stringify","config","headers","body","response","post","data","token","status","type","payload","push","alert","error"],"mappings":"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","sourcesContent":["import '../navbar.css'\r\nimport {Modal, Alert} from 'react-bootstrap'\r\nimport User from '../data-user.json'\r\nimport React, { useState,useContext, useHistory } from 'react';\r\nimport { API, setAuthToken } from \"../../config/api\";\r\nimport { UserContext } from \"../../context/userContext\";\r\nfunction Login(){\r\n\r\n    const [show, setShow] = useState(false);\r\n    const handleClose = () => setShow(false);\r\n    const handleShow = () => setShow(true);\r\n\r\n    const [message, setMessage] = useState(null);\r\n    \r\n    const [state, dispatch] = useContext(UserContext);\r\n\r\n    const history = useHistory();\r\n\r\n    const [login, setLogin] = useState({\r\n        isLogin:false,user:{\r\n          email:\"\",\r\n          password:\"\",\r\n        }\r\n      }\r\n      )\r\n      const handleLogin =(e) =>{\r\n        setLogin((prevState) => ({\r\n          ...prevState,\r\n          [e.target.name]:e.target.value,\r\n        }))\r\n      }\r\n      \r\n     console.log(login.email)\r\n      const handleSubmitLogin =async (e)=>{\r\n        try {\r\n        e.preventDefault();\r\n        if(login.email == User[1].email){\r\n          sessionStorage.setItem(\"isLogin\", JSON.stringify(true));\r\n          sessionStorage.setItem(\"Admin\", JSON.stringify(true));\r\n        }else if(login.email == User[0].email){\r\n          sessionStorage.setItem(\"isLogin\", JSON.stringify(true));\r\n        }\r\n        else{\r\n          sessionStorage.setItem(\"isLogin\", JSON.stringify(false));\r\n          sessionStorage.setItem(\"Admin\", JSON.stringify(false));\r\n        }\r\n     \r\n    \r\n          // Create Configuration Content-type here ...\r\n          // Content-type: application/json\r\n          const config = {\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n          };\r\n    \r\n          // Convert form data to string here ...\r\n          const body = JSON.stringify(login);\r\n    \r\n          // Insert data user for login process ...\r\n          const response = await API.post(\"/\", body, config);\r\n          setAuthToken(response.data.data.token);\r\n          // Checking process\r\n          if (response?.status === 200) {\r\n            // Send data to useContext\r\n            dispatch({\r\n              type: \"LOGIN_SUCCESS\",\r\n              payload: response.data.data,\r\n            });\r\n    \r\n            // Status check\r\n            if (response.data.data.status === \"admin\") {\r\n              history.push(\"/complain-admin\");\r\n            } else {\r\n              history.push(\"/\");\r\n            }\r\n    \r\n            const alert = (\r\n              <Alert variant=\"success\" className=\"py-1\">\r\n                Login success\r\n              </Alert>\r\n            );\r\n            setMessage(alert);\r\n          }\r\n        } catch (error) {\r\n          const alert = (\r\n            <Alert variant=\"danger\" className=\"py-1\">\r\n              Login failed\r\n            </Alert>\r\n          );\r\n          setMessage(alert);\r\n          console.log(error);\r\n        }\r\n      }\r\n\r\n    return(\r\n<div id='modal'> \r\n<Modal show={show} onHide={handleClose}>\r\n<Modal.Header closeButton>\r\n  <Modal.Title>Login</Modal.Title>\r\n</Modal.Header>\r\n<div id=\"body-register\">\r\n<Modal.Body>\r\n    <form onSubmit={handleSubmitLogin}>\r\n    <label>Email</label><br/>\r\n    <input id=\"emailLogin\" name=\"email\" type='email' onChange={handleLogin} required></input><br/>\r\n    <label>Password</label><br/>\r\n    <input id=\"passwordLogin\" type='password' name=\"password\" onChange={handleLogin} required></input><br/>\r\n    <div id=\"btn-login\">\r\n    <button id=\"handlelogin\" type=\"submit\">Login</button>\r\n    </div>\r\n    </form>\r\n    \r\n</Modal.Body>\r\n</div>\r\n</Modal>\r\n</div>\r\n    )\r\n}\r\n\r\nexport default Login"]},"metadata":{},"sourceType":"module"}